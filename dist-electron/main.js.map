{"version":3,"file":"main.js","sources":["../electron/WidgetWindow.ts","../electron/main.ts"],"sourcesContent":["import { BrowserWindow, BrowserWindowConstructorOptions } from 'electron';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\n\n// In ES modules, we need to recreate __dirname and __filename\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nexport interface WidgetWindowOptions {\n  widgetId: string;\n  widgetType: string;\n  width?: number;\n  height?: number;\n  x?: number;\n  y?: number;\n  alwaysOnTop?: boolean;\n  params?: Record<string, any>;\n}\n\nexport class WidgetWindowManager {\n  private windows: Map<string, BrowserWindow> = new Map();\n  \n  constructor(private mainUrl: string) {}\n\n  createWidgetWindow(options: WidgetWindowOptions): BrowserWindow {\n    const { widgetId, widgetType, width = 300, height = 200, x, y, alwaysOnTop = false, params = {} } = options;\n    \n    // Check if window already exists\n    if (this.windows.has(widgetId)) {\n      const existingWindow = this.windows.get(widgetId);\n      existingWindow?.focus();\n      return existingWindow as BrowserWindow;\n    }\n    \n    // Create window with frame: false for frameless window\n    const win = new BrowserWindow({\n      width,\n      height,\n      x,\n      y,\n      frame: false,                   // No window frame\n      transparent: true,              // Transparent background\n      backgroundColor: '#1f2937',     // Match the dark background color\n      webPreferences: {\n        preload: path.join(__dirname, 'preload.js'),\n        nodeIntegration: false,\n        contextIsolation: true,\n        webSecurity: false,            // Allow loading of local resources\n        scrollBounce: false            // Improves scrollbar behavior\n      },\n      alwaysOnTop,\n      skipTaskbar: true,\n      movable: true,                  // Allow window to be moved\n      resizable: false,               // Not resizable as requested\n      hasShadow: false,               // No shadow\n      autoHideMenuBar: true,          // Hide the menu bar\n      titleBarStyle: 'hidden',        // Hidden title bar for cleaner look\n      titleBarOverlay: false,\n      thickFrame: false,              // Thin frame\n      vibrancy: null,\n      visualEffectState: null,\n      fullscreenable: false,\n      show: false,                    // Don't show until ready-to-show\n    });\n    \n    // Show window once ready\n    win.once('ready-to-show', () => {\n      // Hide the standard window controls on macOS (traffic lights)\n      if (process.platform === 'darwin') {\n        // Set the window to have no title bar\n        win.setWindowButtonVisibility(false);\n      }\n      \n      win.show();\n    });\n    \n    // Inject CSS to hide scrollbars when window content is loaded\n    win.webContents.on('did-finish-load', () => {\n      win.webContents.insertCSS(`\n        html, body {\n          overflow: hidden !important;\n        }\n        ::-webkit-scrollbar {\n          display: none !important;\n        }\n        * {\n          -ms-overflow-style: none !important;\n          scrollbar-width: none !important;\n        }\n      `);\n    });\n    \n    // Add window to tracking\n    this.windows.set(widgetId, win);\n    \n    // Build the URL with query parameters for the widget\n    const queryParams = new URLSearchParams();\n    queryParams.append('widgetId', widgetId);\n    queryParams.append('widgetType', widgetType);\n    \n    // Add any additional parameters\n    Object.entries(params).forEach(([key, value]) => {\n      queryParams.append(key, String(value));\n      console.log(`Setting param for widget ${widgetId}: ${key}=${value}`);\n    });\n    \n    // Load the widget URL - use a direct approach to ensure parameters are passed correctly\n    const widgetUrl = `${this.mainUrl}?${queryParams.toString()}#/widget`;\n    console.log('Loading widget URL:', widgetUrl);\n    console.log('Widget parameters:', { widgetId, widgetType, params });\n    win.loadURL(widgetUrl);\n    \n    // Handle window closed event\n    win.on('closed', () => {\n      this.windows.delete(widgetId);\n    });\n    \n    return win;\n  }\n  \n  closeWidgetWindow(widgetId: string): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      win.close();\n      return true;\n    }\n    return false;\n  }\n  \n  getWidgetWindow(widgetId: string): BrowserWindow | undefined {\n    return this.windows.get(widgetId);\n  }\n  \n  getAllWidgetWindows(): Map<string, BrowserWindow> {\n    return this.windows;\n  }\n  \n  setWidgetPosition(widgetId: string, x: number, y: number): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      win.setPosition(x, y);\n      return true;\n    }\n    return false;\n  }\n  \n  setWidgetSize(widgetId: string, width: number, height: number): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      win.setSize(width, height);\n      return true;\n    }\n    return false;\n  }\n  \n  setWidgetAlwaysOnTop(widgetId: string, alwaysOnTop: boolean): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      win.setAlwaysOnTop(alwaysOnTop);\n      return true;\n    }\n    return false;\n  }\n  \n  setWidgetOpacity(widgetId: string, opacity: number): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      // Set the entire window's opacity directly\n      win.setOpacity(opacity);\n      \n      // Also notify the renderer process to maintain state consistency\n      win.webContents.send('widget:opacity', opacity);\n      return true;\n    }\n    return false;\n  }\n  \n  setWidgetVisible(widgetId: string, visible: boolean): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      if (visible) {\n        win.show();\n      } else {\n        win.hide();\n      }\n      return true;\n    }\n    return false;\n  }\n  \n  // Update widget parameters by reloading the window with new URL parameters\n  updateWidgetParams(widgetId: string, params: Record<string, any>): boolean {\n    const win = this.windows.get(widgetId);\n    if (win && !win.isDestroyed()) {\n      // Build URL with new parameters\n      const currentUrl = new URL(win.webContents.getURL());\n      const searchParams = new URLSearchParams(currentUrl.search);\n      \n      // Add/update parameters\n      Object.entries(params).forEach(([key, value]) => {\n        searchParams.set(key, String(value));\n        console.log(`Setting param for widget ${widgetId}: ${key}=${value}`);\n      });\n      \n      // Create new URL with updated parameters\n      const newUrl = `${this.mainUrl}?${searchParams.toString()}#/widget`;\n      console.log(`Reloading widget ${widgetId} with URL:`, newUrl);\n      \n      // Reload window with new URL\n      win.loadURL(newUrl);\n      \n      return true;\n    }\n    return false;\n  }\n} ","import { app, BrowserWindow, ipcMain } from 'electron';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\nimport { WidgetWindowManager, WidgetWindowOptions } from './WidgetWindow';\n\n// In ES modules, we need to recreate __dirname and __filename\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nprocess.env.DIST = path.join(__dirname, '../dist');\nprocess.env.VITE_PUBLIC = app.isPackaged \n  ? process.env.DIST\n  : path.join(__dirname, '../public');\n\nlet mainWindow: BrowserWindow | null = null;\nlet widgetManager: WidgetWindowManager;\n// Store telemetry data and connection status in the main process\nlet telemetryData: any = null;\nlet telemetryConnected: boolean = false;\n\nfunction createWindow() {\n  mainWindow = new BrowserWindow({\n    width: 1000,\n    height: 700,\n    webPreferences: {\n      preload: path.join(__dirname, 'preload.js'),\n      nodeIntegration: false,\n      contextIsolation: true,\n      webSecurity: false,\n      scrollBounce: false\n    },\n    // Standard window with controls\n    frame: true,\n    transparent: false,\n    titleBarStyle: 'default'\n  });\n\n  // Test active push message to Renderer\n  mainWindow.webContents.on('did-finish-load', () => {\n    mainWindow?.webContents.send('main-process-message', new Date().toLocaleString());\n  });\n\n  const mainUrl = process.env.VITE_DEV_SERVER_URL || `file://${path.join(process.env.DIST, 'index.html')}`;\n  mainWindow.loadURL(mainUrl);\n\n  if (process.env.VITE_DEV_SERVER_URL) {\n    mainWindow.webContents.openDevTools();\n  }\n  \n  // Create Widget Manager\n  widgetManager = new WidgetWindowManager(mainUrl);\n  \n  // Set up IPC listeners for widget operations\n  setupIpcListeners();\n}\n\nfunction setupIpcListeners() {\n  // Create a new widget window\n  ipcMain.handle('widget:create', (_, options: WidgetWindowOptions) => {\n    console.log('Creating widget window:', options);\n    try {\n      const window = widgetManager.createWidgetWindow(options);\n      return { success: true, id: options.widgetId };\n    } catch (error: any) {\n      console.error('Error creating widget window:', error);\n      return { success: false, error: error.message };\n    }\n  });\n  \n  // Close a widget window\n  ipcMain.handle('widget:close', (_, widgetId: string) => {\n    const success = widgetManager.closeWidgetWindow(widgetId);\n    return { success };\n  });\n  \n  // Get all widget windows\n  ipcMain.handle('widget:getAll', () => {\n    const widgets = Array.from(widgetManager.getAllWidgetWindows().keys());\n    return { success: true, widgets };\n  });\n  \n  // Set widget position\n  ipcMain.handle('widget:setPosition', (_, { widgetId, x, y }: { widgetId: string, x: number, y: number }) => {\n    const success = widgetManager.setWidgetPosition(widgetId, x, y);\n    return { success };\n  });\n  \n  // Set widget size\n  ipcMain.handle('widget:setSize', (_, { widgetId, width, height }: { widgetId: string, width: number, height: number }) => {\n    const success = widgetManager.setWidgetSize(widgetId, width, height);\n    return { success };\n  });\n  \n  // Set widget always-on-top status\n  ipcMain.handle('widget:setAlwaysOnTop', (_, { widgetId, alwaysOnTop }: { widgetId: string, alwaysOnTop: boolean }) => {\n    const success = widgetManager.setWidgetAlwaysOnTop(widgetId, alwaysOnTop);\n    return { success };\n  });\n  \n  // Set widget opacity\n  ipcMain.handle('widget:setOpacity', (_, { widgetId, opacity }: { widgetId: string, opacity: number }) => {\n    const success = widgetManager.setWidgetOpacity(widgetId, opacity);\n    return { success };\n  });\n  \n  // Set widget visibility\n  ipcMain.handle('widget:setVisible', (_, { widgetId, visible }: { widgetId: string, visible: boolean }) => {\n    const success = widgetManager.setWidgetVisible(widgetId, visible);\n    return { success };\n  });\n  \n  // Update widget parameters\n  ipcMain.handle('widget:updateParams', (_, { widgetId, params }: { widgetId: string, params: Record<string, any> }) => {\n    console.log(`Main process received updateParams request for widget ${widgetId}:`, params);\n    \n    // Use the new method to reload the widget with updated parameters\n    if (widgetManager.updateWidgetParams(widgetId, params)) {\n      return { success: true };\n    } else {\n      return { success: false, error: 'Failed to update widget parameters' };\n    }\n  });\n  \n  // Add handlers for telemetry data access from IPC widgets\n  ipcMain.handle('telemetry:getData', () => {\n    console.log('IPC Request: telemetry:getData, returning:', telemetryData);\n    return telemetryData;\n  });\n  \n  ipcMain.handle('telemetry:getConnectionStatus', () => {\n    console.log('IPC Request: telemetry:getConnectionStatus, returning:', telemetryConnected);\n    return telemetryConnected;\n  });\n  \n  // Listen for telemetry updates from the renderer process\n  ipcMain.on('telemetry:update', (_, data) => {\n    telemetryData = data;\n    // Forward to all widget windows\n    const windows = widgetManager.getAllWidgetWindows();\n    for (const [_, window] of windows.entries()) {\n      if (!window.isDestroyed()) {\n        window.webContents.send('telemetry:update', data);\n      }\n    }\n  });\n  \n  // Listen for connection status changes\n  ipcMain.on('telemetry:connectionChange', (_, connected) => {\n    telemetryConnected = connected;\n    // Forward to all widget windows\n    const windows = widgetManager.getAllWidgetWindows();\n    for (const [_, window] of windows.entries()) {\n      if (!window.isDestroyed()) {\n        window.webContents.send('telemetry:connectionChange', connected);\n      }\n    }\n  });\n  \n  // Handle Escape key to close widgets\n  ipcMain.on('widget:closeByEscape', (event) => {\n    const win = BrowserWindow.fromWebContents(event.sender);\n    if (win) {\n      win.close();\n    }\n  });\n}\n\napp.whenReady().then(createWindow);\n\n// Add a 'before-quit' handler to ensure all widgets are closed properly\napp.on('before-quit', () => {\n  console.log('Application is shutting down, closing all widgets...');\n  // Close all open widget windows to prevent orphaned processes\n  if (widgetManager) {\n    const windows = widgetManager.getAllWidgetWindows();\n    for (const [widgetId, window] of windows.entries()) {\n      if (!window.isDestroyed()) {\n        console.log(`Closing widget: ${widgetId}`);\n        window.close();\n      }\n    }\n  }\n  \n  // Clean up all IPC handlers\n  console.log('Removing all IPC handlers...');\n  ipcMain.removeHandler('widget:create');\n  ipcMain.removeHandler('widget:close');\n  ipcMain.removeHandler('widget:getAll');\n  ipcMain.removeHandler('widget:setPosition');\n  ipcMain.removeHandler('widget:setSize');\n  ipcMain.removeHandler('widget:setAlwaysOnTop');\n  ipcMain.removeHandler('widget:setOpacity');\n  ipcMain.removeHandler('widget:setVisible');\n  ipcMain.removeHandler('widget:updateParams');\n  ipcMain.removeHandler('app:quit');\n  ipcMain.removeHandler('telemetry:getData');\n  ipcMain.removeHandler('telemetry:getConnectionStatus');\n  \n  // Remove all listeners\n  ipcMain.removeAllListeners('widget:closeByEscape');\n  ipcMain.removeAllListeners('telemetry:update');\n  ipcMain.removeAllListeners('telemetry:connectionChange');\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') app.quit();\n  mainWindow = null;\n});\n\n// Add shutdown handler for main window to close all widgets\nipcMain.handle('app:quit', () => {\n  // Close all widget windows first\n  if (widgetManager) {\n    const windows = widgetManager.getAllWidgetWindows();\n    for (const [widgetId, window] of windows.entries()) {\n      if (!window.isDestroyed()) {\n        window.close();\n      }\n    }\n  }\n  // Then quit the application\n  app.quit();\n  return { success: true };\n});\n\napp.on('activate', () => {\n  if (BrowserWindow.getAllWindows().length === 0) createWindow();\n});\n"],"names":["__filename","__dirname","_"],"mappings":"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"}